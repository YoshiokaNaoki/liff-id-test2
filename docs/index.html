<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>LIFF Starter</title>
        <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>

<style>

button.buttonCss {
    font-size: 20px;
    font-weight: bold;
    -webkit-appearance: none; 
    width:200px; 
    height:50px;
}

</style>

      </head>
    <body>

<script>

var myLiffId = '1634329436-nW9OzZE7';

function initializeLiff() {
  var divElm = document.getElementById("console");
  liff.init({
            liffId: myLiffId
        })
        .then(() => {
          if (liff.isLoggedIn() == false) {
            liff.login();
          } else {
            divElm.innerHTML = "LOGINED"            
          }
        })
        .catch((err) => {
            document.getElementById("liffAppContent").classList.add('hidden');
            document.getElementById("liffInitErrorMessage").classList.remove('hidden');
        });
}

function liffInit() {
  initializeLiff();
}

function liffLogined() {
    var divElm = document.getElementById("console");
    liff.init({
            liffId: myLiffId
        })
        .then(() => {
          if (liff.isLoggedIn()) {
            divElm.innerHTML = "LOGIN SUCCESS";
          } else {
            divElm.innerHTML = "LOGIN ERROR";
          }
        })
        .catch((err) => {
            document.getElementById("liffAppContent").classList.add('hidden');
            document.getElementById("liffInitErrorMessage").classList.remove('hidden');
        });

}


function IDToken() {
  const idToken = liff.getIDToken();
  console.log("tokenID=" + idToken);

  var divElm = document.getElementById("console");
  divElm.innerHTML = idToken;
}

function Logout() {
  liff.logout();
  window.location.reload();
}

</script>

 <body>
  
<h1>ID TokenからユーザーID取得調査</h1>
<hr>

   
<input type="button" value="liff.init()" onclick="liffInit();" class="buttonCss">
<br><br>


<input type="button" value="liff.login()" onclick="liffLogined()" class="buttonCss">

<br><br> 
<input type="button" value="liff.getIDToken()" onclick="IDToken()" class="buttonCss">
 
<br><br> 
<input type="button" value="liff.Logout()" onclick="Logout()" class="buttonCss">

<hr>
<h2>出力内容</h2>
<div id="console" style="width:500px; height:200px; background-color:lightgray; white-space: normal; border:2px solid #aaa;">
</div>



  </body>
</html>

